<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta charset="uft-8" />
  <meta name="theme-color" content="#536878" />
  <meta name=viewport content="width=device-width, initial-scale=1">
  <!--script type="text/javascript" src="https://verticurl-sandbox.neolane.net/res/verticurl/firebase-messaging-sw.js"></script-->
  <title>Verticurl!</title>
  <link rel="manifest" href="/manifest.json">
  <link href="https://bootswatch.com/3/cosmo/bootstrap.min.css" rel="stylesheet" type="text/css">
  <style type="text/css">
    html{
      height: 500px;
      overflow-y: scroll;
    }
    .allowNotificationBtn-wrapper {
      position: fixed;
      top:0;
      right: 0;
    }
    #allowNotificationBtn {
      background-color: red;
      color: #fff;
      padding: 5px 10px;
      display: inline-block;
      text-decoration: none;
    }
  </style>
</head>
<body style="" class="">
<div class="container"><nav class="navbar navbar-inverse">
<div class="container-fluid">
<div class="navbar-header"><button class="navbar-toggle collapsed" id="input153535568909664" type="button" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#">Verticurl</a></div>
<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
<ul class="nav navbar-nav">
<li class="active"><a href="#">About Us <span class="sr-only">(current)</span></a></li>
<li><a href="#">Why Verticurl</a></li>
<li class="dropdown"><a class="dropdown-toggle" role="button" aria-expanded="false" href="#" data-toggle="dropdown">Services <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
<li><a href="#">Demand Gen</a></li>
<li><a href="#">Martech 360</a></li>
<li><a href="#">Marketing Automation</a></li>
<li class="divider"></li>
<li><a href="#">Demand center</a></li>
<li class="divider"></li>
<li><a href="#">CRM</a></li>
</ul>
</li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li><a href="#">Knowledge Center</a></li>
</ul>
</div>
</div>
</nav>
<div class="jumbotron">
<h1>VERTICURL | A WPP Company</h1>
<h2>DEMAND GENERATION</h2>
<p>Our consultants are focused on improving your lead generation activities. We will help you to generate and direct quality leads to your salesforce, making continuous testing and efficiency critical to your success.</p>
<h2>Marketing Automation</h2>
<p>Our Marketing Automation services ensure that not only you have the right technology solution in place but also get the maximum value out of it in terms of contribution to your sales pipeline.</p>
<h2>Strategy &amp; Consulting</h2>
<p>We assist in devising a campaign strategy through market research and analysis, making recommendations on the best approach to meeting your demand generation objectives.</p>
<p><a class="btn btn-primary btn-lg" data-toggle="modal" data-target="#modal">Learn more</a></p>
</div>
<div class="page-content">
<h2>Example body text</h2>
<p>Nullam quis risus eget <a href="#">urna mollis ornare</a> vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam id dolor id nibh ultricies vehicula.</p>
<p><small>This line of text is meant to be treated as fine print.</small></p>
<p>The following snippet of text is <strong>rendered as bold text</strong>.</p>
<p>The following snippet of text is <em>rendered as italicized text</em>.</p>
<p>An abbreviation of the word attribute is <abbr title="attribute">attr</abbr>.</p>
</div>
<div class="page-content">
<h2>Example body text</h2>
<p>Nullam quis risus eget <a href="#">urna mollis ornare</a> vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam id dolor id nibh ultricies vehicula.</p>
<p><small>This line of text is meant to be treated as fine print.</small></p>
<p>The following snippet of text is <strong>rendered as bold text</strong>.</p>
<p>The following snippet of text is <em>rendered as italicized text</em>.</p>
<p>An abbreviation of the word attribute is <abbr title="attribute">attr</abbr>.</p>
</div>
<div class="page-content">
<h2>Example body text</h2>
<p>Nullam quis risus eget <a href="#">urna mollis ornare</a> vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam id dolor id nibh ultricies vehicula.</p>
<p><small>This line of text is meant to be treated as fine print.</small></p>
<p>The following snippet of text is <strong>rendered as bold text</strong>.</p>
<p>The following snippet of text is <em>rendered as italicized text</em>.</p>
<p>An abbreviation of the word attribute is <abbr title="attribute">attr</abbr>.</p>
</div>
<div class="row">
<div class="col-md-3 col-sm-6">
<div class="panel panel-danger">
<div class="panel-heading">
<h3 class="panel-title">Panel warning</h3>
</div>
<div class="panel-body">Aliquam sed quisque. Arcu dolor orci at dolor nec nulla vivamus eget torquent aliquam ultrices eu nunc donec dolor ante ullamcorper. Risus non vestibulum eleifend quis lorem nunc sit consectetuer. Amet in vehicula. Condimentum congue tortor</div>
</div>
</div>
<div class="col-md-3 col-sm-6">
<div class="panel panel-primary">
<div class="panel-heading">
<h3 class="panel-title">Panel primary</h3>
</div>
<div class="panel-body">Aliquam sed quisque. Arcu dolor orci at dolor nec nulla vivamus eget torquent aliquam ultrices eu nunc donec dolor ante ullamcorper. Risus non vestibulum eleifend quis lorem nunc sit consectetuer. Amet in vehicula. Condimentum congue tortor</div>
</div>
</div>
<div class="col-md-3 col-sm-6">
<div class="panel panel-success">
<div class="panel-heading">
<h3 class="panel-title">Panel success</h3>
</div>
<div class="panel-body">Aliquam sed quisque. Arcu dolor orci at dolor nec nulla vivamus eget torquent aliquam ultrices eu nunc donec dolor ante ullamcorper. Risus non vestibulum eleifend quis lorem nunc sit consectetuer. Amet in vehicula. Condimentum congue tortor</div>
</div>
</div>
<div class="col-md-3 col-sm-6">
<div class="panel panel-warning">
<div class="panel-heading">
<h3 class="panel-title">Panel warning</h3>
</div>
<div class="panel-body">Aliquam sed quisque. Arcu dolor orci at dolor nec nulla vivamus eget torquent aliquam ultrices eu nunc donec dolor ante ullamcorper. Risus non vestibulum eleifend quis lorem nunc sit consectetuer. Amet in vehicula. Condimentum congue tortor</div>
</div>
</div>
</div>
<table class="table table-striped table-hover ">
<thead>
<tr><th>#</th><th>Column heading</th><th>Column heading</th><th>Column heading</th></tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Column content</td>
<td>Column content</td>
<td>Column content</td>
</tr>
<tr>
<td>2</td>
<td>Column content</td>
<td>Column content</td>
<td>Column content</td>
</tr>
<tr class="info">
<td>3</td>
<td>Column content</td>
<td>Column content</td>
<td>Column content</td>
</tr>
<tr class="success">
<td>4</td>
<td>Column content</td>
<td>Column content</td>
<td>Column content</td>
</tr>
<tr class="danger">
<td>5</td>
<td>Column content</td>
<td>Column content</td>
<td>Column content</td>
</tr>
<tr class="warning">
<td>6</td>
<td>Column content</td>
<td>Column content</td>
<td>Column content</td>
</tr>
<tr class="active">
<td>7</td>
<td>Column content</td>
<td>Column content</td>
<td>Column content</td>
</tr>
</tbody>
</table>
<div><form class="form-horizontal" id="mainForm"><input name="tokenId" id="tokenId" type="hidden" value="" /> <input name="tokenTopic" id="tokenTopic" type="hidden" value="" /><fieldset><legend>Contact us</legend>
<div class="form-group"><label class="col-lg-2 control-label" for="fname">First Name</label>
<div class="col-lg-10"><input class="form-control" id="fname" type="text" placeholder="First Name" data-nl-bindto="xpath" data-nl-xpath="@firstName" data-nl-label="First name" /></div>
</div>
<div class="form-group"><label class="col-lg-2 control-label" for="lname">Last Name</label>
<div class="col-lg-10"><input class="form-control" id="lname" type="text" placeholder="Last Name" data-nl-bindto="xpath" data-nl-xpath="@lastName" data-nl-label="Last name" /></div>
</div>
<div class="form-group"><label class="col-lg-2 control-label" for="inputEmail">Email</label>
<div class="col-lg-10"><input class="form-control" id="inputEmail" type="text" placeholder="Email" data-nl-bindto="xpath" data-nl-xpath="@email" data-nl-label="Email" /></div>
</div>
<div class="form-group"><label class="col-lg-2 control-label" for="phone">Phone</label>
<div class="col-lg-10"><input class="form-control" id="phone" type="text" placeholder="Phone" data-nl-bindto="xpath" data-nl-xpath="@phone" data-nl-label="Phone" /></div>
</div>
<div class="form-group"><label class="col-lg-2 control-label" for="textArea">Textarea</label>
<div class="col-lg-10"><textarea class="form-control" id="textArea" rows="3" data-nl-bindto="xpath" data-nl-xpath="comment" data-nl-label="Comment"></textarea> <span class="help-block">A longer block of help text that breaks onto a new line and may extend beyond one line.</span></div>
</div>
<div class="form-group"><label class="col-lg-2 control-label">Gender</label>
<div class="col-lg-10">
<div class="radio"><label> <input name="optionsRadios" id="optionsRadios1" type="radio" checked="checked" value="1" data-nl-bindto="xpath" data-nl-xpath="@gender" data-nl-label="Gender" /> Male</label></div>
<div class="radio"><label> <input name="optionsRadios" id="optionsRadios2" type="radio" value="2" data-nl-bindto="xpath" data-nl-xpath="@gender" data-nl-label="Gender" /> Female </label></div>
</div>
</div>
<div class="form-group"><label class="col-lg-2 control-label" for="select">Country</label>
<div class="col-lg-10"><select class="form-control" id="select" data-nl-bindto="xpath" data-nl-xpath="country" data-nl-label="Country">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
</select></div>
</div>
<div class="form-group">
<div class="col-lg-10 col-lg-offset-2"><button class="btn btn-default" id="input153535568909631" type="reset">Cancel</button> <button class="btn btn-primary" id="submit" type="submit" data-nl-bindto="action" data-nl-transition="" data-nl-action="next">Submit</button></div>
</div>
</fieldset><a id="TriggerSubmit" onclick="return document.controller.submit('next')" href="#" data-nl-bindto="action" data-nl-transition="next" data-nl-action="next"></a></form></div>
</div>
<div class="modal" id="modal">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header"><button class="close" id="input153535568909654" aria-hidden="true" type="button" data-dismiss="modal">&times;</button>
<h4 class="modal-title">Modal title</h4>
</div>
<div class="modal-body">
<p>One fine body&acirc;&euro;&brvbar;</p>
</div>
<div class="modal-footer"><button class="btn btn-default" id="input153535568909657" type="button" data-dismiss="modal">Close</button> <button class="btn btn-primary" id="input153535568909657" type="button">Save changes</button></div>
</div>
</div>
</div>
<div class="allowNotificationBtn-wrapper" style="display: none;"><a id="allowNotificationBtn" href="#">Allow Notification?</a></div>
<div class="col-xs-12 text-center" id="token_div" style="display: none;">
<div id="token" style="word-break: break-all; display: none;"></div>
<button class="btn-danger btn" id="input153854120009529" style="display: none;" onclick="deleteToken()">[-] Delete Token</button></div>
<div class="col-xs-12 text-center" id="permission_div" style="display: none;">
<div id="token"></div>
<button class="btn-primary btn" id="input153854120009563" onclick="requestPermission()">[+] Add this to home screen</button> <br /><br /></div>
<div id="messages"></div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.14.0/jquery.validate.min.js" type="text/javascript"></script>
<script type="text/javascript">
          $('#allowNotificationBtn').click(function(){
            requestPermission();
          });
</script>
<script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js" type="text/javascript"></script>
<script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-messaging.js" type="text/javascript"></script>
<!--script src="https://verticurl-sandbox.neolane.net/res/verticurl/requestanimframe.js"></script-->
<script type="text/javascript">

        var topicForPWA = 'ac3Topic';

        window.onload = function() {
          //Fireworks.initialize();
          var howLaunched = window.location.search.substring(1).split('=')[0];
          if (howLaunched === 'homescreen') {
            var welcome = document.getElementById('welcome-back');
            welcome.style.display = 'block';
            welcome.classList.remove('isPaused');
          }
        };
        navigator.serviceWorker.register('/firebase-messaging-sw.js')
          .then((registration) => {
            messaging.useServiceWorker(registration);
            // Request permission and get token.....
          });

          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyBrQ_d6riQnUlH0-lex1hzdorlt5EwGnwk",
            authDomain: "verticurl-64ffa.firebaseapp.com",
            databaseURL: "https://verticurl-64ffa.firebaseio.com",
            projectId: "verticurl-64ffa",
            storageBucket: "verticurl-64ffa.appspot.com",
            messagingSenderId: "313445919700"
          };
          firebase.initializeApp(config);
          // [START get_messaging_object]
          // Retrieve Firebase Messaging object.
          const messaging = firebase.messaging();
          // [END get_messaging_object]
          // [START set_public_vapid_key]
          // Add the public key generated from the console here.
          messaging.usePublicVapidKey('BE4SWzoiuFZcAqQoQPfOBXD3Vxmc8L7h828sOlziOM-J3A-sDVDBSQXjZvXZCAJJgv-Bzi3-R-BxYlSu6eitKcA');
          // [END set_public_vapid_key]

          // [START refresh_token]
          // Callback fired if Instance ID token is updated.
          messaging.onTokenRefresh(function() {
            messaging.getToken().then(function(refreshedToken) {
              console.log('Token refreshed.');
              // Indicate that the new Instance ID token has not yet been sent to the
              // app server.
              setTokenSentToServer(false);
              // Send Instance ID token to app server.
              sendTokenToServer(refreshedToken);
              // [START_EXCLUDE]
              // Display new Instance ID token and clear UI of all previous messages.
              resetUI();
              // [END_EXCLUDE]
            }).catch(function(err) {
              console.log('Unable to retrieve refreshed token ', err);
            });
          });
          // [END refresh_token]
          // [START receive_message]
          // Handle incoming messages. Called when:
          // - a message is received while the app has focus
          // - the user clicks on an app notification created by a service worker
          //   `messaging.setBackgroundMessageHandler` handler.

          messaging.onMessage(function(payload) {
            console.log('Message received. ', payload);
            // [START_EXCLUDE]
            // Update the UI to include the received message.
            appendMessage(payload);
            // [END_EXCLUDE]
          });
          //[END receive_message]

          function resetUI() {
            // [START get_token]
            // Get Instance ID token. Initially this makes a network call, once retrieved
            // subsequent calls to getToken will return from cache.
            messaging.getToken().then(function(currentToken) {
              if (currentToken) {
                sendTokenToServer(currentToken);
              } else {
                // Show permission request.
                console.log('No Instance ID token available. Request permission to generate one.');
                $('.allowNotificationBtn-wrapper').show();
                console.log('shown the btn')
                setTokenSentToServer(false);
              }
            }).catch(function(err) {
              console.log('An error occurred while retrieving token. ', err);
              setTokenSentToServer(false);
            });
            // [END get_token]
          }

          // Send the Instance ID token your application server, so that it can:
          // - send messages back to this app
          // - subscribe/unsubscribe the token from topics
          function sendTokenToServer(currentToken) {
            if (!isTokenSentToServer()) {
              console.log('Sending token to server...');
              // TODO(developer): Send the current token to your server.


              var url = 'https://ac383ap.adobesandbox.com/nl/jsp/soaprouter.jsp';
              var body = '<?xml version="1.0" encoding="utf-8"?>'+
              '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:xtk:session"><soapenv:Header/><soapenv:Body><urn:Write><urn:sessiontoken>'+document.controller.getValue('/ctx/vars/@key')+'</urn:sessiontoken><urn:domDoc xsi:type="ns:Element">xtk.session.Write(<pushNotificationTokens _operation="insert" topic="'+topicForPWA+'" tokenId="'+ currentToken+'" xtkschema="cus:pushNotificationTokens" />)</urn:domDoc></urn:Write></soapenv:Body></soapenv:Envelope>';
                      /*$.support.cors = true;
                      $.ajax({
                          url: url,
                          type: 'POST',
                          crossDomain: true,
                          data: body,
                          dataType: 'text',
                          headers: {
                              'Content-Type':'text/xml; charset=utf-8',
                              'SOAPAction':'xtk:persist#Write'
                          },
                          success: function (result) {
                              console.log('success ' + result);
                          },
                          error: function (jqXHR, tranStatus, errorThrown) {
                              console.log(
                                  //'Status: ' + jqXHR.status + ' ' + jqXHR.statusText + '. ' +
                                  'Response: ' + jqXHR.responseText
                              );
                          }
                      });*/





              var key = 'AAAASPrVK9Q:APA91bHomz6rJtVrugAjYdef6Q9N99pI76I2je7Cq6Io0wy3zRfiTcYiqJfPNEZqfBCdX_N5O9P9h32VDFAMI1t5xqcP_PQsDpG14A7P7EnRLy6Nj1vo3UTB84KqUqninaESuLJ8TpZl';
              //var token = currentToken;
              document.getElementById('tokenId').value = currentToken;
              console.log('document.controller.tokenId = ' + currentToken);
              var topic = topicForPWA;
              //document.getElementById('tokenTopic').value = 'pwaTest';
              //document.controller.setValue('/ctx/vars/@tokenId', currentToken, 'tokenId');
              //document.controller.setValue('/ctx/vars/@tokenTopic', topic, 'tokenTopic');

              fetch('https://iid.googleapis.com/iid/v1/' + currentToken + '/rel/topics/' + topic, {
                'method': 'POST',
                'headers': {
                  'Authorization': 'key=' + key,
                  'Content-Type': 'application/json'
                }
              }).then(function(response) {
                console.log(response);
              }).catch(function(error) {
                console.error(error);
              })

              setTokenSentToServer(true);
            } else {
              console.log('Token already sent to server so won\'t send it again ' +
              'unless it changes');
            }
          }
          function isTokenSentToServer() {
            return window.localStorage.getItem('sentToServer') === '1';
          }
          function setTokenSentToServer(sent) {
            window.localStorage.setItem('sentToServer', sent ? '1' : '0');
          }

          function requestPermission() {
            console.log('Requesting permission...');
            // [START request_permission]
            messaging.requestPermission().then(function() {
              console.log('Notification permission granted.');
              $('.allowNotificationBtn-wrapper').hide();
              // TODO(developer): Retrieve an Instance ID token for use with FCM.
              // [START_EXCLUDE]
              // In many cases once an app has been granted notification permission, it
              // should update its UI reflecting this.
              resetUI();
              // [END_EXCLUDE]
            }).catch(function(err) {
              console.log('Unable to get permission to notify.', err);
            });
            // [END request_permission]
          }
          function deleteToken() {
            // Delete Instance ID token.
            // [START delete_token]
            messaging.getToken().then(function(currentToken) {
              messaging.deleteToken(currentToken).then(function() {
                console.log('Token deleted.');
                setTokenSentToServer(false);
                // [START_EXCLUDE]
                // Once token is deleted update UI.
                resetUI();
                // [END_EXCLUDE]
              }).catch(function(err) {
                console.log('Unable to delete token. ', err);
              });
              // [END delete_token]
            }).catch(function(err) {
              console.log('Error retrieving Instance ID token. ', err);
            });
          }
          // Add a message to the messages element.
          function appendMessage(payload) {
            const messagesElement = document.querySelector('#messages');
            const dataHeaderELement = document.createElement('h5');
            const dataElement = document.createElement('pre');
            dataElement.style = 'overflow-x:hidden;';
            dataHeaderELement.textContent = 'Received message:';
            dataElement.textContent = JSON.stringify(payload, null, 2);
            messagesElement.appendChild(dataHeaderELement);
            messagesElement.appendChild(dataElement);
          }
          resetUI();
</script>
</html>
